<h1>投稿一覧</h1>

<% if flash[:alert] %>
  <div class="alert alert-danger">
    <%= flash[:alert] %>
  </div>
<% end %>

<%= form_with(url: search_posts_path, method: :get, local: true) do %>
  <div class="form-group">
    <%= label_tag :query, "検索" %>
    <%= text_field_tag :query, params[:query], class: "form-control" %>
  </div>
  <%= submit_tag "検索", class: "btn btn-primary" %>
<% end %>

<% @posts.each do |post| %>
  <div class="post">
    <h2><%= link_to post.title, post_path(post, query: @search_query) %></h2>
    <p><%= truncate(post.body, length: 100) %></p>
  </div>
<% end %>
